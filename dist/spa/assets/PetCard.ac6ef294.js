import{y as ve,t as D,m as fe,z as me,A as O,B as W,E as J,u as Y,G as H,r as P,c as f,w as I,g as j,h as p,ah as pe,ai as ge,aj as he,j as A,n as ye,f as Q,v as be,ak as xe,o as se,l as ue,H as Z,J as Ce,N as _e,al as qe,a1 as M,am as Pe,an as we,R as Se,S as K,U as ee,V as F,d as B,a2 as ke,a3 as $e,F as Be,a5 as te,Z as X,Y as Ie}from"./index.298ea574.js";import{g as ne,s as ae,c as Ae}from"./selection.3c17003f.js";import{u as ce,a as de,b as Ve}from"./user.ff184bfd.js";import{U as oe,V as le,d as G,E as Ne,l as Te,r as Ee,a as De,b as Fe,w as Le,D as Me,y as Qe}from"./firebase.7a5a15bc.js";function ze(e){const n=[.06,6,50];return typeof e=="string"&&e.length&&e.split(":").forEach((l,u)=>{const i=parseFloat(l);i&&(n[u]=i)}),n}var Re=ve({name:"touch-swipe",beforeMount(e,{value:n,arg:l,modifiers:u}){if(u.mouse!==!0&&D.has.touch!==!0)return;const i=u.mouseCapture===!0?"Capture":"",t={handler:n,sensitivity:ze(l),direction:ne(u),noop:fe,mouseStart(o){ae(o,t)&&me(o)&&(O(t,"temp",[[document,"mousemove","move",`notPassive${i}`],[document,"mouseup","end","notPassiveCapture"]]),t.start(o,!0))},touchStart(o){if(ae(o,t)){const r=o.target;O(t,"temp",[[r,"touchmove","move","notPassiveCapture"],[r,"touchcancel","end","notPassiveCapture"],[r,"touchend","end","notPassiveCapture"]]),t.start(o)}},start(o,r){D.is.firefox===!0&&W(e,!0);const y=J(o);t.event={x:y.left,y:y.top,time:Date.now(),mouse:r===!0,dir:!1}},move(o){if(t.event===void 0)return;if(t.event.dir!==!1){Y(o);return}const r=Date.now()-t.event.time;if(r===0)return;const y=J(o),b=y.left-t.event.x,c=Math.abs(b),h=y.top-t.event.y,s=Math.abs(h);if(t.event.mouse!==!0){if(c<t.sensitivity[1]&&s<t.sensitivity[1]){t.end(o);return}}else if(c<t.sensitivity[2]&&s<t.sensitivity[2])return;const v=c/r,m=s/r;t.direction.vertical===!0&&c<s&&c<100&&m>t.sensitivity[0]&&(t.event.dir=h<0?"up":"down"),t.direction.horizontal===!0&&c>s&&s<100&&v>t.sensitivity[0]&&(t.event.dir=b<0?"left":"right"),t.direction.up===!0&&c<s&&h<0&&c<100&&m>t.sensitivity[0]&&(t.event.dir="up"),t.direction.down===!0&&c<s&&h>0&&c<100&&m>t.sensitivity[0]&&(t.event.dir="down"),t.direction.left===!0&&c>s&&b<0&&s<100&&v>t.sensitivity[0]&&(t.event.dir="left"),t.direction.right===!0&&c>s&&b>0&&s<100&&v>t.sensitivity[0]&&(t.event.dir="right"),t.event.dir!==!1?(Y(o),t.event.mouse===!0&&(document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),Ae(),t.styleCleanup=x=>{t.styleCleanup=void 0,document.body.classList.remove("non-selectable");const _=()=>{document.body.classList.remove("no-pointer-events--children")};x===!0?setTimeout(_,50):_()}),t.handler({evt:o,touch:t.event.mouse!==!0,mouse:t.event.mouse,direction:t.event.dir,duration:r,distance:{x:c,y:s}})):t.end(o)},end(o){t.event!==void 0&&(H(t,"temp"),D.is.firefox===!0&&W(e,!1),t.styleCleanup!==void 0&&t.styleCleanup(!0),o!==void 0&&t.event.dir!==!1&&Y(o),t.event=void 0)}};e.__qtouchswipe=t,u.mouse===!0&&O(t,"main",[[e,"mousedown","mouseStart",`passive${i}`]]),D.has.touch===!0&&O(t,"main",[[e,"touchstart","touchStart",`passive${u.capture===!0?"Capture":""}`],[e,"touchmove","noop","notPassiveCapture"]])},updated(e,n){const l=e.__qtouchswipe;l!==void 0&&(n.oldValue!==n.value&&(typeof n.value!="function"&&l.end(),l.handler=n.value),l.direction=ne(n.modifiers))},beforeUnmount(e){const n=e.__qtouchswipe;n!==void 0&&(H(n,"main"),H(n,"temp"),D.is.firefox===!0&&W(e,!1),n.styleCleanup!==void 0&&n.styleCleanup(),delete e.__qtouchswipe)}});function Ue(){const e=new Map;return{getCache:function(n,l){return e[n]===void 0?e[n]=l:e[n]},getCacheWithFn:function(n,l){return e[n]===void 0?e[n]=l():e[n]}}}const Oe={name:{required:!0},disable:Boolean},ie={setup(e,{slots:n}){return()=>p("div",{class:"q-panel scroll",role:"tabpanel"},A(n.default))}},je={modelValue:{required:!0},animated:Boolean,infinite:Boolean,swipeable:Boolean,vertical:Boolean,transitionPrev:String,transitionNext:String,transitionDuration:{type:[String,Number],default:300},keepAlive:Boolean,keepAliveInclude:[String,Array,RegExp],keepAliveExclude:[String,Array,RegExp],keepAliveMax:Number},We=["update:modelValue","before-transition","transition"];function Ye(){const{props:e,emit:n,proxy:l}=j(),{getCacheWithFn:u}=Ue();let i,t;const o=P(null),r=P(null);function y(a){const d=e.vertical===!0?"up":"left";q((l.$q.lang.rtl===!0?-1:1)*(a.direction===d?1:-1))}const b=f(()=>[[Re,y,void 0,{horizontal:e.vertical!==!0,vertical:e.vertical,mouse:!0}]]),c=f(()=>e.transitionPrev||`slide-${e.vertical===!0?"down":"right"}`),h=f(()=>e.transitionNext||`slide-${e.vertical===!0?"up":"left"}`),s=f(()=>`--q-transition-duration: ${e.transitionDuration}ms`),v=f(()=>typeof e.modelValue=="string"||typeof e.modelValue=="number"?e.modelValue:String(e.modelValue)),m=f(()=>({include:e.keepAliveInclude,exclude:e.keepAliveExclude,max:e.keepAliveMax})),x=f(()=>e.keepAliveInclude!==void 0||e.keepAliveExclude!==void 0);I(()=>e.modelValue,(a,d)=>{const C=w(a)===!0?N(a):-1;t!==!0&&$(C===-1?0:C<N(d)?-1:1),o.value!==C&&(o.value=C,n("before-transition",a,d),ye(()=>{n("transition",a,d)}))});function _(){q(1)}function z(){q(-1)}Object.assign(l,{next:_,previous:z,goTo:V});function V(a){n("update:modelValue",a)}function w(a){return a!=null&&a!==""}function N(a){return i.findIndex(d=>d.props.name===a&&d.props.disable!==""&&d.props.disable!==!0)}function R(){return i.filter(a=>a.props.disable!==""&&a.props.disable!==!0)}function $(a){const d=a!==0&&e.animated===!0&&o.value!==-1?"q-transition--"+(a===-1?c.value:h.value):null;r.value!==d&&(r.value=d)}function q(a,d=o.value){let C=d+a;for(;C>-1&&C<i.length;){const k=i[C];if(k!==void 0&&k.props.disable!==""&&k.props.disable!==!0){$(a),t=!0,n("update:modelValue",k.props.name),setTimeout(()=>{t=!1});return}C+=a}e.infinite===!0&&i.length>0&&d!==-1&&d!==i.length&&q(a,a===-1?i.length:-1)}function T(){const a=N(e.modelValue);return o.value!==a&&(o.value=a),!0}function U(){const a=w(e.modelValue)===!0&&T()&&i[o.value];return e.keepAlive===!0?[p(ge,m.value,[p(x.value===!0?u(v.value,()=>({...ie,name:v.value})):ie,{key:v.value,style:s.value},()=>a)])]:[p("div",{class:"q-panel scroll",style:s.value,key:v.value,role:"tabpanel"},[a])]}function g(){if(i.length!==0)return e.animated===!0?[p(pe,{name:r.value},U)]:U()}function S(a){return i=he(A(a.default,[])).filter(d=>d.props!==null&&d.props.slot===void 0&&w(d.props.name)===!0),i.length}function E(){return i}return{panelIndex:o,panelDirectives:b,updatePanelsList:S,updatePanelIndex:T,getPanelContent:g,getEnabledPanels:R,getPanels:E,isValidPanelName:w,keepAliveProps:m,needsUniqueKeepAliveWrapper:x,goToPanelByOffset:q,goToPanel:V,nextPanel:_,previousPanel:z}}var He=Q({name:"QCarouselSlide",props:{...Oe,imgSrc:String},setup(e,{slots:n}){const l=f(()=>e.imgSrc?{backgroundImage:`url("${e.imgSrc}")`}:{});return()=>p("div",{class:"q-carousel__slide",style:l.value},A(n.default))}});let L=0;const Ke={fullscreen:Boolean,noRouteFullscreenExit:Boolean},Xe=["update:fullscreen","fullscreen"];function Ge(){const e=j(),{props:n,emit:l,proxy:u}=e;let i,t,o;const r=P(!1);be(e)===!0&&I(()=>u.$route.fullPath,()=>{n.noRouteFullscreenExit!==!0&&c()}),I(()=>n.fullscreen,h=>{r.value!==h&&y()}),I(r,h=>{l("update:fullscreen",h),l("fullscreen",h)});function y(){r.value===!0?c():b()}function b(){r.value!==!0&&(r.value=!0,o=u.$el.parentNode,o.replaceChild(t,u.$el),document.body.appendChild(u.$el),L++,L===1&&document.body.classList.add("q-body--fullscreen-mixin"),i={handler:c},Z.add(i))}function c(){r.value===!0&&(i!==void 0&&(Z.remove(i),i=void 0),o.replaceChild(u.$el,t),r.value=!1,L=Math.max(0,L-1),L===0&&(document.body.classList.remove("q-body--fullscreen-mixin"),u.$el.scrollIntoView!==void 0&&setTimeout(()=>{u.$el.scrollIntoView()})))}return xe(()=>{t=document.createElement("span")}),se(()=>{n.fullscreen===!0&&b()}),ue(c),Object.assign(u,{toggleFullscreen:y,setFullscreen:b,exitFullscreen:c}),{inFullscreen:r,toggleFullscreen:y}}const Je=["top","right","bottom","left"],Ze=["regular","flat","outline","push","unelevated"];var et=Q({name:"QCarousel",props:{...ce,...je,...Ke,transitionPrev:{type:String,default:"fade"},transitionNext:{type:String,default:"fade"},height:String,padding:Boolean,controlColor:String,controlTextColor:String,controlType:{type:String,validator:e=>Ze.includes(e),default:"flat"},autoplay:[Number,Boolean],arrows:Boolean,prevIcon:String,nextIcon:String,navigation:Boolean,navigationPosition:{type:String,validator:e=>Je.includes(e)},navigationIcon:String,navigationActiveIcon:String,thumbnails:Boolean},emits:[...Xe,...We],setup(e,{slots:n}){const{proxy:{$q:l}}=j(),u=de(e,l);let i,t;const{updatePanelsList:o,getPanelContent:r,panelDirectives:y,goToPanel:b,previousPanel:c,nextPanel:h,getEnabledPanels:s,panelIndex:v}=Ye(),{inFullscreen:m}=Ge(),x=f(()=>m.value!==!0&&e.height!==void 0?{height:e.height}:{}),_=f(()=>e.vertical===!0?"vertical":"horizontal"),z=f(()=>`q-carousel q-panel-parent q-carousel--with${e.padding===!0?"":"out"}-padding`+(m.value===!0?" fullscreen":"")+(u.value===!0?" q-carousel--dark q-dark":"")+(e.arrows===!0?` q-carousel--arrows-${_.value}`:"")+(e.navigation===!0?` q-carousel--navigation-${R.value}`:"")),V=f(()=>{const g=[e.prevIcon||l.iconSet.carousel[e.vertical===!0?"up":"left"],e.nextIcon||l.iconSet.carousel[e.vertical===!0?"down":"right"]];return e.vertical===!1&&l.lang.rtl===!0?g.reverse():g}),w=f(()=>e.navigationIcon||l.iconSet.carousel.navigationIcon),N=f(()=>e.navigationActiveIcon||w.value),R=f(()=>e.navigationPosition||(e.vertical===!0?"right":"bottom")),$=f(()=>({color:e.controlColor,textColor:e.controlTextColor,round:!0,[e.controlType]:!0,dense:!0}));I(()=>e.modelValue,()=>{e.autoplay&&(clearInterval(i),q())}),I(()=>e.autoplay,g=>{g?q():clearInterval(i)});function q(){const g=qe(e.autoplay)===!0?e.autoplay:5e3;i=setTimeout(g>=0?h:c,Math.abs(g))}se(()=>{e.autoplay&&q()}),ue(()=>{clearInterval(i)});function T(g,S){return p("div",{class:`q-carousel__control q-carousel__navigation no-wrap absolute flex q-carousel__navigation--${g} q-carousel__navigation--${R.value}`+(e.controlColor!==void 0?` text-${e.controlColor}`:"")},[p("div",{class:"q-carousel__navigation-inner flex flex-center no-wrap"},s().map(S))])}function U(){const g=[];if(e.navigation===!0){const S=n["navigation-icon"]!==void 0?n["navigation-icon"]:a=>p(M,{key:"nav"+a.name,class:`q-carousel__navigation-icon q-carousel__navigation-icon--${a.active===!0?"":"in"}active`,...a.btnProps,onClick:a.onClick}),E=t-1;g.push(T("buttons",(a,d)=>{const C=a.props.name,k=v.value===d;return S({index:d,maxIndex:E,name:C,active:k,btnProps:{icon:k===!0?N.value:w.value,size:"sm",...$.value},onClick:()=>{b(C)}})}))}else if(e.thumbnails===!0){const S=e.controlColor!==void 0?` text-${e.controlColor}`:"";g.push(T("thumbnails",E=>{const a=E.props;return p("img",{key:"tmb#"+a.name,class:`q-carousel__thumbnail q-carousel__thumbnail--${a.name===e.modelValue?"":"in"}active`+S,src:a.imgSrc||a["img-src"],onClick:()=>{b(a.name)}})}))}return e.arrows===!0&&v.value>=0&&((e.infinite===!0||v.value>0)&&g.push(p("div",{key:"prev",class:`q-carousel__control q-carousel__arrow q-carousel__prev-arrow q-carousel__prev-arrow--${_.value} absolute flex flex-center`},[p(M,{icon:V.value[0],...$.value,onClick:c})])),(e.infinite===!0||v.value<t-1)&&g.push(p("div",{key:"next",class:`q-carousel__control q-carousel__arrow q-carousel__next-arrow q-carousel__next-arrow--${_.value} absolute flex flex-center`},[p(M,{icon:V.value[1],...$.value,onClick:h})]))),_e(n.control,g)}return()=>(t=o(n),p("div",{class:z.value,style:x.value},[Ce("div",{class:"q-carousel__slides-container"},r(),"sl-cont",e.swipeable,()=>y.value)].concat(U())))}}),re=Q({name:"QCardSection",props:{tag:{type:String,default:"div"},horizontal:Boolean},setup(e,{slots:n}){const l=f(()=>`q-card__section q-card__section--${e.horizontal===!0?"horiz row no-wrap":"vert"}`);return()=>p(e.tag,{class:l.value},A(n.default))}}),tt=Q({name:"QCardActions",props:{...Pe,vertical:Boolean},setup(e,{slots:n}){const l=we(e),u=f(()=>`q-card__actions ${l.value} q-card__actions--${e.vertical===!0?"vert column":"horiz row"}`);return()=>p("div",{class:u.value},A(n.default))}}),nt=Q({name:"QCard",props:{...ce,tag:{type:String,default:"div"},square:Boolean,flat:Boolean,bordered:Boolean},setup(e,{slots:n}){const l=j(),u=de(e,l.proxy.$q),i=f(()=>"q-card"+(u.value===!0?" q-card--dark q-dark":"")+(e.bordered===!0?" q-card--bordered":"")+(e.square===!0?" q-card--square no-border-radius":"")+(e.flat===!0?" q-card--flat no-shadow":""));return()=>p(e.tag,{class:i.value},A(n.default))}});const at={class:"text-h6"},ot={class:"text-subtitle2"},ut=Se({__name:"PetCard",props:{pet:{type:Object,default:()=>({})},id:{type:String,default:""}},setup(e){const n=e,l=P(0),u=P([]);async function i(){const s=await Te(Ee(De,`pets/${n.id}`)),v=s.items.map(x=>Fe(x)),m=await Promise.all(v);u.value=s.items.map(x=>({...x,url:m.shift()}))}i();const{user:t}=Ve(),o=P(0),r=P(!1);async function y(){const s=await oe(le(G,"likes","pets",n.id)),v=(await Le(s)).docs;o.value=v.length,r.value=v.some(m=>m.data().email===t.email)}y();async function b(){if(!t||r.value)return;const s=Me(G,"likes","pets",n.id,t.uid);await Qe(s,{email:t.email,displayName:t.displayName}),o.value++,r.value=!0}const c=P(0),h=oe(le(G,"comments","pets",n.id));return Ne(h,s=>{c.value=s.docs.length}),(s,v)=>(K(),ee(nt,{class:"my-card q-mb-md"},{default:F(()=>[B(et,{animated:"",modelValue:l.value,"onUpdate:modelValue":v[0]||(v[0]=m=>l.value=m),navigation:"",swipeable:""},{default:F(()=>[(K(!0),ke(Be,null,$e(u.value,(m,x)=>(K(),ee(He,{key:m.name,name:x,"img-src":m.url},null,8,["name","img-src"]))),128))]),_:1},8,["modelValue"]),B(re,null,{default:F(()=>[te("div",at,X(e.pet.title),1),te("div",ot,"por "+X(e.pet.user.displayName),1)]),_:1}),B(re,{class:"q-pt-none"},{default:F(()=>[Ie(X(e.pet.desc),1)]),_:1}),B(tt,{align:"left"},{default:F(()=>[B(M,{flat:"",round:"",color:"red",icon:r.value?"favorite":"favorite_border",label:o.value,onClick:b},null,8,["icon","label"]),B(M,{to:`/pet/${e.id}`,flat:"",round:"",color:"blue",icon:"comment",label:c.value},null,8,["to","label"])]),_:1})]),_:1}))}});export{nt as Q,ut as _,re as a};
